<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragmentos :: cabecalho(#{pagina_inicial})}" />
<body>
  <div th:replace="~{fragmentos :: botao-logout}" />
  <div class="container">
    <div style="display: flex; align-items: center;">
      <img th:src="${img_usuario}" 
           alt="Imagem de Perfil" style="width: 100px; height: auto; border-radius: 50%;">
      &nbsp<h1><span th:text="#{msg_boas_vindas}">Olá</span>, <b><span th:text="${nome_usuario}"></span>!</b></h1>
    </div>
    
    <div class="row">
      <h1 th:text="#{titulo_pag_index}">Eventos Climáticos Extremos</h1>
    </div>
    
    <div th:replace="~{fragmentos :: mudar_lingua(#{endpoint_pag_inicial})}" />
    
    <!-- Alertas importantes -->
    <div class="alert alert-warning" th:if="${!alertas.isEmpty()}">
      <h4>Alertas Ativos!</h4>
      <div th:each="alerta : ${alertas}">
        <span th:text="${alerta}"></span>
      </div>
    </div>
    
    <div class="row">
      <div class="col-12">
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col" th:text="#{tipo_evento}">Tipo do Evento</th>
              <th scope="col" th:text="#{intensidade}">Intensidade</th>
              <th scope="col" th:text="#{localizacao}">Localização</th>
              <th scope="col" th:text="#{data_ocorrencia}">Data</th>
              <th scope="col">#</th>
              <th scope="col">#</th>
              <th scope="col">#</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="evento : ${eventos}">
              <td th:text="${evento.tipo}">Furacão</td>
              <td th:text="${evento.intensidade}">Categoria 5</td>
              <td th:text="${evento.localizacao}">Costa Leste</td>
              <td th:text="${#temporals.format(evento.dataOcorrencia, 'dd/MM/yyyy')}">15/08/2023</td>
              <td><a th:href="@{/detalhes_evento/{id}(id = ${evento.id})}" th:text="#{detalhes}">Detalhes</a></td>
              <td><a th:href="@{/atualizar_evento/{id}(id = ${evento.id})}" th:text="#{atualizar}">Atualizar</a></td>
              <td><a th:href="@{/remover_evento/{id}(id = ${evento.id})}" th:text="#{remover}">Remover</a></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="row mt-4">
      <div class="d-grid gap-2 d-md-block">
        <a href="/cad_evento_climatico" class="btn btn-primary me-md-2" th:text="#{cad_evento}">Cadastrar Evento</a>
        <a href="/form_mensagem" class="btn btn-secondary me-md-2">Enviar Alerta (Kafka)</a>
        <a href="/form_mensagem_rabbit" class="btn btn-secondary me-md-2">Enviar Alerta (RabbitMQ)</a>
        <a href="/form_chat_gpt" class="btn btn-info">Consultar IA Climática</a>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" 
          crossorigin="anonymous"></script>
</body>
</html>